/* ============================
   BULK SEND — layout: tabla arriba / resultados abajo
   - Tabla full width
   - Overflow => scroll
   ============================ */

.bulk-send{
  --bg: var(--app-bg, #0b1220);
  --surface: var(--surface, #0f172a);
  --card: color-mix(in oklab, var(--surface) 92%, black);
  --ink: var(--ink, #0f172a);
  --muted: var(--muted, #64748b);
  --border: var(--border, #e5e7eb);
  --ring: color-mix(in oklab, var(--brand-400, #60a5fa) 65%, transparent);

  --radius: 18px;
  --radius-sm: 12px;
  --shadow: 0 18px 50px rgba(2, 6, 23, .12);
  --shadow2: 0 12px 30px rgba(2, 6, 23, .10);

  --pad: clamp(12px, 2vw, 18px);
  --gap: clamp(12px, 2vw, 16px);

  color: var(--ink);
}

.bulk-send.ef-page{
  padding: clamp(12px, 2.5vw, 22px);
}

/* ---------- Panel inicial ---------- */
.bulk-send .bulk-panel{
  max-width: 980px;
  margin: 0 auto;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  background: #fff;
  box-shadow: var(--shadow);
  overflow: hidden;
}

.bulk-send .bulk-panel__field{
  padding: var(--pad);
  display: grid;
  gap: 8px;
}

.bulk-send .ef-label{
  font-size: 12.5px;
  color: var(--muted);
  letter-spacing: .2px;
}

.bulk-send .ef-input{
  width: 100%;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: #fff;
  color: var(--ink);
  padding: 10px 12px;
  outline: none;
  transition: border-color .15s ease, box-shadow .15s ease;
}

.bulk-send .ef-input:focus{
  border-color: color-mix(in oklab, var(--ring) 60%, var(--border));
  box-shadow: 0 0 0 4px color-mix(in oklab, var(--ring) 35%, transparent);
}

.bulk-send .bulk-panel__actions{
  padding: 0 var(--pad) var(--pad);
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  align-items: center;
}

/* ---------- Botones (scoped) ---------- */
.bulk-send .btn{
  border-radius: 999px;
  border: 1px solid var(--border);
  background: #fff;
  color: var(--ink);
  padding: 9px 12px;
  font-size: 12.5px;
  line-height: 1;
  cursor: pointer;
  transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease, opacity .12s ease;
  box-shadow: 0 10px 24px rgba(2, 6, 23, .10);
}

.bulk-send .btn:hover{
  transform: translateY(-1px);
  border-color: color-mix(in oklab, var(--border) 70%, black);
}

.bulk-send .btn:active{ transform: translateY(0); }

.bulk-send .btn:disabled{
  opacity: .55;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

.bulk-send .btn.btn-primary-final{
  background: linear-gradient(180deg,
    color-mix(in oklab, var(--brand-600, #2563eb) 78%, white) 0%,
    var(--brand-600, #2563eb) 70%,
    color-mix(in oklab, var(--brand-600, #2563eb) 78%, black) 100%
  );
  color: white;
  border-color: color-mix(in oklab, var(--brand-600, #2563eb) 55%, black);
  box-shadow: 0 14px 30px rgba(37, 99, 235, .22);
}

.bulk-send .btn.btn-secondary{
  background: #fff;
}

.bulk-send .btn.btn-xs{
  padding: 8px 12px;
  font-size: 12px;
}

/* ---------- Toolbar ---------- */
.bulk-send .bulk-toolbar{
  position: sticky;
  top: 0;
  z-index: 40;

  display: flex;
  justify-content: space-between;
  gap: 14px;
  align-items: flex-start;

  padding: 14px var(--pad);
  margin-bottom: var(--gap);

  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: rgba(255,255,255,.92);
  backdrop-filter: blur(10px);
  box-shadow: var(--shadow2);
}

.bulk-send .bulk-toolbar__left{
  min-width: 240px;
  display: grid;
  gap: 6px;
}

.bulk-send .bulk-toolbar__title{
  font-size: 15px;
  font-weight: 750;
  letter-spacing: .2px;
}

.bulk-send .bulk-toolbar__meta{
  font-size: 12.5px;
  color: var(--muted);
}

.bulk-send .bulk-toolbar__right{
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: flex-end;
  align-items: center;
}

/* =========================================
   CAMBIO CLAVE: MAIN en 1 columna (stack)
   Tabla arriba / Resultados abajo
   ========================================= */
.bulk-send .bulk-main{
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--gap);
  align-items: start;
}

/* ---------- Cards ---------- */
.bulk-send .bulk-card{
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: #fff;
  box-shadow: var(--shadow2);
  overflow: hidden;
}

/* =========================================
   GRID HOST: full width + overflow scroll
   ========================================= */
.bulk-send .bulk-grid-host{
  /* importante: que el contenedor permita scroll horizontal */
  overflow: auto;
  max-width: 100%;
  padding: 0;
}

/* evita que los hijos rompan el contenedor */
.bulk-send .bulk-grid-host > *{
  min-width: 0;
}

/* Si tu BulkGrid renderiza una tabla, esto ayuda:
   - el contenido puede ser más ancho que el card
   - pero el scroll queda en el host */
.bulk-send .bulk-grid-host table{
  width: max-content;     /* permite crecer según columnas */
  min-width: 100%;        /* pero mínimo ocupa todo el ancho visible */
  border-collapse: separate;
  border-spacing: 0;
}

/* Si tu BulkGrid NO es table sino div-grid, igual sirve:
   fuerza que el primer hijo pueda ser ancho */
.bulk-send .bulk-grid-host > :first-child{
  width: max-content;
  min-width: 100%;
}

/* =========================================
   RESULTADOS: debajo, más compacto
   ========================================= */
.bulk-send .bulk-results{
  display: grid;
  grid-template-rows: auto 1fr;
  min-height: 260px;
}

.bulk-send .bulk-results__title{
  padding: 14px var(--pad);
  border-bottom: 1px solid var(--border);
  font-size: 13.5px;
  font-weight: 750;
  letter-spacing: .2px;
  background: #fff;
}

.bulk-send .bulk-results__empty{
  padding: var(--pad);
  color: var(--muted);
  font-size: 12.5px;
}

/* wrapper con scroll por si hay tabla ancha */
.bulk-send .bulk-results__wrap{
  overflow: auto;
  max-width: 100%;
}

/* tabla resultados */
.bulk-send .bulk-results__table{
  width: max-content;
  min-width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  font-size: 12.5px;
}

.bulk-send .bulk-results__th,
.bulk-send .bulk-results__td{
  padding: 10px 12px;
  border-bottom: 1px solid var(--border);
  vertical-align: top;
  white-space: nowrap;
}

/* header sticky de resultados */
.bulk-send .bulk-results__th{
  position: sticky;
  top: 0;
  z-index: 2;
  text-align: left;
  font-weight: 750;
  background: #fff;
}

/* zebra + hover */
.bulk-send .bulk-results__table tbody tr:nth-child(2n){
  background: color-mix(in oklab, #fff 92%, #f1f5f9);
}

.bulk-send .bulk-results__table tbody tr:hover{
  background: color-mix(in oklab, #fff 85%, #e2e8f0);
}

/* Columna Error: que se lea bien */
.bulk-send .bulk-results__table th:last-child,
.bulk-send .bulk-results__table td:last-child{
  white-space: normal;
  min-width: 320px;
  max-width: 720px;
  word-break: break-word;
}

/* ---------- Focus visible ---------- */
.bulk-send :where(button, select, input, textarea, a):focus-visible{
  outline: none;
  box-shadow: 0 0 0 4px color-mix(in oklab, var(--ring) 35%, transparent);
  border-color: color-mix(in oklab, var(--ring) 60%, var(--border));
}

/* ---------- Scrollbars suaves ---------- */
.bulk-send :where(.bulk-grid-host, .bulk-results__wrap){
  scrollbar-width: thin;
  scrollbar-color: color-mix(in oklab, var(--muted) 60%, transparent) transparent;
}

.bulk-send :where(.bulk-grid-host, .bulk-results__wrap)::-webkit-scrollbar{
  height: 10px;
  width: 10px;
}

.bulk-send :where(.bulk-grid-host, .bulk-results__wrap)::-webkit-scrollbar-thumb{
  background: color-mix(in oklab, var(--muted) 55%, transparent);
  border-radius: 999px;
}

.bulk-send :where(.bulk-grid-host, .bulk-results__wrap)::-webkit-scrollbar-track{
  background: transparent;
}
