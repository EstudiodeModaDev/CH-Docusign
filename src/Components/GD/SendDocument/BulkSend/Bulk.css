/* =========================================================
   Bulk.css (NUEVO) — REGLAS:
   1) Toolbar arriba (FULL WIDTH)
   2) Tabla debajo (FULL WIDTH, overflow scroll)
   3) Resultados debajo (FULL WIDTH)
   ========================================================= */

/* ============ FUERZA EL LAYOUT EN COLUMNA ============ */
.ef-page.bulk-send{
  /* mata cualquier grid/flex heredado */
  display: flex !important;
  flex-direction: column !important;
  align-items: stretch !important;
  justify-content: flex-start !important;

  width: 100% !important;
  max-width: none !important;

  --bg: #f5f7fb;
  --card: #ffffff;
  --ink: #0f172a;
  --muted: #64748b;
  --line: #e6e8f0;
  --line2: #d8deea;
  --brand: var(--brand-600, #2563eb);

  --radius: 22px;
  --shadow: 0 18px 50px rgba(2, 6, 23, .12);

  --pad: clamp(14px, 2vw, 20px);
  --gap: clamp(14px, 2vw, 18px);

  background: var(--bg);
  color: var(--ink);
  padding: clamp(14px, 2.4vw, 22px);
}

/* asegura que hijos ocupen todo el ancho */
.ef-page.bulk-send > *{
  width: 100% !important;
  max-width: 100% !important;
}

/* ============ CARD BASE ============ */
.bulk-send .bulk-card,
.bulk-send .ef-card{
  background: var(--card);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  overflow: hidden;
}

/* ============ TOOLBAR ARRIBA (FULL WIDTH) ============ */
.bulk-send .bulk-toolbar{
  /* arriba siempre */
  order: 0 !important;

  position: sticky;
  top: 0;
  z-index: 50;

  width: 100% !important;

  display: flex !important;
  flex-direction: row !important;
  align-items: center !important;
  justify-content: space-between !important;
  gap: 14px;

  padding: 14px var(--pad);
  margin: 0 0 var(--gap) 0;

  border: 1px solid var(--line);
  border-radius: var(--radius);
  background: rgba(255,255,255,.9);
  backdrop-filter: blur(10px);
  box-shadow: var(--shadow);
}

.bulk-send .bulk-toolbar__left{
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 220px;
}

.bulk-send .bulk-toolbar__title{
  font-size: 16px;
  font-weight: 950;
  letter-spacing: .3px;
  text-transform: uppercase;
}

.bulk-send .bulk-toolbar__meta{
  font-size: 12.5px;
  color: var(--muted);
  font-weight: 700;
}

.bulk-send .bulk-toolbar__right{
  display: flex !important;
  flex-direction: row !important;
  flex-wrap: wrap !important;
  gap: 10px;
  justify-content: flex-end;
  align-items: center;
}

/* botones generales del toolbar */
.bulk-send .btn{
  border: 1px solid var(--line);
  background: #fff;
  color: var(--ink);
  border-radius: 999px;
  padding: 9px 12px;
  font-size: 12px;
  font-weight: 900;
  cursor: pointer;
  box-shadow: 0 10px 20px rgba(2, 6, 23, .10);
  transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease, opacity .12s ease;
}

.bulk-send .btn:hover{
  transform: translateY(-1px);
  border-color: var(--line2);
  box-shadow: 0 14px 26px rgba(2, 6, 23, .12);
}

.bulk-send .btn:active{ transform: translateY(0); }

.bulk-send .btn:disabled{
  opacity: .55;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

.bulk-send .btn.btn-xs{ padding: 8px 12px; }

.bulk-send .btn.btn-primary-final{
  background: linear-gradient(180deg,
    color-mix(in oklab, var(--brand) 75%, white),
    var(--brand)
  );
  color: #fff;
  border-color: color-mix(in oklab, var(--brand) 55%, black);
}

.bulk-send .btn.btn-secondary{
  background: #fff;
}

/* ============ MAIN: TABLA Y RESULTADOS APILADOS ============ */
.bulk-send .bulk-main{
  order: 1 !important;

  display: flex !important;
  flex-direction: column !important;
  gap: var(--gap);

  width: 100% !important;
  max-width: 100% !important;
}

/* ============ TABLA (GRID) DEBAJO DE TOOLBAR ============ */
.bulk-send .bulk-grid-host{
  order: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
}

/* topbar del grid */
.bulk-send .bulk-grid__topbar{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;

  padding: 14px var(--pad);
  border-bottom: 1px solid var(--line);
  background: #fff;
}

.bulk-send .bulk-grid__left{
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
}

.bulk-send .bulk-grid__meta{
  font-size: 12.5px;
  color: var(--muted);
  font-weight: 800;
}

.bulk-send .bulk-grid__btn{
  border: 1px solid var(--line);
  background: #fff;
  color: var(--ink);
  border-radius: 999px;
  padding: 9px 12px;
  font-size: 12px;
  font-weight: 950;
  cursor: pointer;
  box-shadow: 0 10px 18px rgba(2, 6, 23, .10);
}

.bulk-send .bulk-grid__btn--danger{
  border-color: color-mix(in oklab, #ef4444 40%, var(--line));
  color: #b91c1c;
}

/* ✅ SCROLL HORIZONTAL/VERTICAL SI HAY OVERFLOW */
.bulk-send .bulk-grid__wrap{
  width: 100%;
  max-width: 100%;
  overflow: auto;           /* <-- regla clave */
}

/* tabla: crece con columnas (provoca scroll) */
.bulk-send .bulk-grid__table{
  width: max-content;
  min-width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  font-size: 13px;
}

/* header sticky */
.bulk-send .bulk-grid__th{
  position: sticky;
  top: 0;
  z-index: 5;

  background: #fff;
  border-bottom: 1px solid var(--line2);

  padding: 12px 12px;
  text-align: left;
  white-space: nowrap;
  font-weight: 950;
}

/* rows/cells */
.bulk-send .bulk-grid__td{
  padding: 8px 10px;
  margin: 5px;
  border-bottom: 1px solid var(--line);
  background: #fff;
  white-space: nowrap;
}

.bulk-send .bulk-grid__tr:nth-child(2n) .bulk-grid__td{
  background: #fafbff;
}

/* inputs */
.bulk-send .bulk-grid__cell{
  min-width: 100px;
  max-width: 180px;
  width: 100%;

  border: 1px solid var(--line2);
  border-radius: 10px;
  padding: 7px 9px;

  background: #fff;
  color: var(--ink);
  outline: none;
}

.bulk-send .bulk-grid__cell:focus{
  border-color: color-mix(in oklab, var(--brand) 45%, var(--line2));
  box-shadow: 0 0 0 4px color-mix(in oklab, var(--brand) 18%, transparent);
}

.bulk-send .bulk-grid__cell:disabled{
  background: #f1f5f9;
  color: color-mix(in oklab, var(--ink) 65%, var(--muted));
}

/* Sticky columnas (1 y 2) */
.bulk-send .bulk-grid__th.sticky-left,
.bulk-send .bulk-grid__td.sticky-left{
  position: sticky;
  left: 0;
  z-index: 7;
  background: #fff;
  min-width: 260px;
  box-shadow: 10px 0 18px rgba(2, 6, 23, .06);
}

.bulk-send .bulk-grid__th.sticky-left-2,
.bulk-send .bulk-grid__td.sticky-left-2{
  position: sticky;
  left: 260px;
  z-index: 7;
  background: #fff;
  min-width: 260px;
  box-shadow: 10px 0 18px rgba(2, 6, 23, .06);
}

/* zebra en sticky cells */
.bulk-send .bulk-grid__tr:nth-child(2n) .bulk-grid__td.sticky-left,
.bulk-send .bulk-grid__tr:nth-child(2n) .bulk-grid__td.sticky-left-2{
  background: #fafbff;
}

/* ============ RESULTADOS DEBAJO DE LA TABLA ============ */
.bulk-send .bulk-results{
  order: 1 !important;

  width: 100% !important;
  max-width: 100% !important;

  display: flex;
  flex-direction: column;
}

.bulk-send .bulk-results__title{
  padding: 14px var(--pad);
  border-bottom: 1px solid var(--line);
  font-weight: 950;
  font-size: 14px;
}

.bulk-send .bulk-results__empty{
  padding: var(--pad);
  color: var(--muted);
  font-weight: 800;
}

/* scroll si resultados se ponen anchos */
.bulk-send .bulk-results__wrap{
  overflow: auto;
  max-width: 100%;
}

.bulk-send .bulk-results__table{
  width: max-content;
  min-width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  font-size: 12.5px;
}

.bulk-send .bulk-results__th,
.bulk-send .bulk-results__td{
  padding: 10px 12px;
  border-bottom: 1px solid var(--line);
  white-space: nowrap;
}

.bulk-send .bulk-results__th{
  position: sticky;
  top: 0;
  z-index: 3;
  background: #fff;
  font-weight: 950;
  border-bottom: 1px solid var(--line2);
}

/* Columna error legible */
.bulk-send .bulk-results__table th:last-child,
.bulk-send .bulk-results__table td:last-child{
  white-space: normal;
  min-width: 360px;
  max-width: 1000px;
  word-break: break-word;
}

/* Focus general */
.bulk-send :where(button, select, input, textarea, a):focus-visible{
  outline: none;
  box-shadow: 0 0 0 4px color-mix(in oklab, var(--brand) 18%, transparent);
  border-color: color-mix(in oklab, var(--brand) 40%, var(--line2));
}

/* =========================================================
   SCROLLBAR (gris + grueso)
   - WebKit: Chrome / Edge / Safari
   - Firefox: scrollbar-width / scrollbar-color
========================================================= */

/* Aplica a los contenedores que tienen overflow */
.bulk-send .bulk-grid__wrap,
.bulk-send .bulk-results__wrap{
  scrollbar-gutter: stable both-edges; /* evita saltos de layout */
}

/* ---------- Chrome/Edge/Safari ---------- */
.bulk-send .bulk-grid__wrap::-webkit-scrollbar,
.bulk-send .bulk-results__wrap::-webkit-scrollbar{
  width: 14px;   /* vertical */
  height: 14px;  /* horizontal */
}

.bulk-send .bulk-grid__wrap::-webkit-scrollbar-track,
.bulk-send .bulk-results__wrap::-webkit-scrollbar-track{
  background: rgba(148, 163, 184, 0.18); /* gris claro */
  border-radius: 999px;
}

.bulk-send .bulk-grid__wrap::-webkit-scrollbar-thumb,
.bulk-send .bulk-results__wrap::-webkit-scrollbar-thumb{
  background: rgba(148, 163, 184, 0.85); /* gris */
  border-radius: 999px;
  border: 3px solid rgba(255, 255, 255, 0.65); /* “padding” alrededor */
}

.bulk-send .bulk-grid__wrap::-webkit-scrollbar-thumb:hover,
.bulk-send .bulk-results__wrap::-webkit-scrollbar-thumb:hover{
  background: rgba(100, 116, 139, 0.95); /* gris más oscuro al hover */
}

.bulk-send .bulk-grid__wrap::-webkit-scrollbar-corner,
.bulk-send .bulk-results__wrap::-webkit-scrollbar-corner{
  background: transparent;
}

/* ---------- Firefox ---------- */
@supports (scrollbar-color: auto) {
  .bulk-send .bulk-grid__wrap,
  .bulk-send .bulk-results__wrap{
    scrollbar-width: auto; /* "thin" es muy delgado; auto se ve más grueso */
    scrollbar-color: rgba(148, 163, 184, 0.95) rgba(148, 163, 184, 0.18);
  }
}
